//*****************************************************************************
//
//	File:		TkTextFile.cpp
//	Created:	2013-08-26
//
//*****************************************************************************

#include "TkTextFile.h"

const char* TkTextFile::_pcFileMode[TARS_FILE_MODE_COUNT] = { "r", "w", "a", "r+", "w+", "a+" };

//-----------------------------------------------------------------------------
// Name:		TkTextFile constructor
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile::TkTextFile()
: _pFile( nullptr )
{
	
}

//-----------------------------------------------------------------------------
// Name:		TkTextFile destructor
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile::~TkTextFile()
{
	close();
}

//-----------------------------------------------------------------------------
// Name:		open
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
void TkTextFile::open( const TkString& strFileName, const TARS_FILE_MODE eFileMode )
{
	_pFile = fopen( strFileName.buffer(), _pcFileMode[eFileMode] );
}

//-----------------------------------------------------------------------------
// Name:		close
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
void TkTextFile::close()
{
	if	( _pFile )
	{
		fclose( _pFile );
		_pFile = nullptr;
	}
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const int8 n )
{
	char buf[256];

	fprintf( _pFile, "%d", n );
	(*this) << buf;

	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const int16 n )
{
	fprintf( _pFile, "%d", n );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const int32 n )
{
	fprintf( _pFile, "%d", n );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const int64 n )
{
	fprintf( _pFile, "%d", n );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const uint8 n )
{
	fprintf( _pFile, "%u", n );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const uint16 n )
{
	fprintf( _pFile, "%u", n );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const uint32 n )
{
	fprintf( _pFile, "%u", n );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const uint64 n )
{
	fprintf( _pFile, "%u", n );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const float f )
{
	fprintf( _pFile, "%f", f );
	return ( *this );
}

//-----------------------------------------------------------------------------
// Name:		operator<<
//
// Created:		2013-08-26
//-----------------------------------------------------------------------------
TkTextFile& TkTextFile::operator<<( const double d )
{
	fprintf( _pFile, "%f", d );
	return ( *this );
}
